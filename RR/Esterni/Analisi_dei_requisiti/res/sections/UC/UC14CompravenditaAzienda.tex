\subsubsection{UC14 - Gestione acquisti e vendite}
\begin{figure}[h]
	\includegraphics[width=6cm]{res/images/UC14-Generale.png}
	\centering
	\caption{Gestione degli acquisti e delle vendite da parte delle aziende}
\end{figure}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: alle aziende sono messe a disposizione diverse operazione per visualizzare e gestire le vendite e gli acquisti che vengono effettuati all'interno della piattaforma. Inoltre è possibile visualizzare lo storico di tutte le fatture;
	\item \textbf{Scenario principale}: l'utente visualizza e svolge alcune operazioni per gestire le vendite, gli acquisti e le fatture ad essi riguardanti;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e mette a disposizione tutte le pagine necessarie alla visualizzazione e gestione degli acquisti, vendite e fatture.
	\item \textbf{Postcondizione}: l'azienda ha visualizzato e/o gestito i propri acquisti, vendite e fatture.
\end{itemize} 
\subsubsection{UC14.1 - Gestione vendite}
\begin{figure}[H]
	\includegraphics[width=8cm]{res/images/UC14-Vendite.png}
	\centering
	\caption{Gestione delle vendite da parte delle aziende}
\end{figure}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: alle aziende sono messe a disposizione diverse operazione per visualizzare e gestire le vendite all'interno della piattaforma. Esse comprendono la visualizzazione dello stato di approvazione/rifiuto di proposte d'ordine verso altre aziende, l'approvazione/rifiuto di proposte di pagamento dilazionato, e la visualizzazione delle aziende che devono ancora pagare una somma dilazionata come precedentemente accordato;
	\item \textbf{Scenario principale}: l'utente visualizza e svolge alcune operazioni per gestire le vendite;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e mette a disposizione tutte le pagine necessarie alla visualizzazione e gestione delle vendite;
	\item \textbf{Postcondizione}: l'azienda ha visualizzato e/o gestitole proprie vendite.
\end{itemize} 

\subsubsection{UC14.1.1 - Visualizzazione vendite in attesa di approvazione}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente;
	\item \textbf{Specializzazione}:
	\begin{itemize}
		\item \textbf{UC14.1.2}: visualizzazione della precedente lista filtrando per le vendite a pagamento immediato;
		\item \textbf{UC14.1.3}: visualizzazione della precedente lista filtrando per le vendite a pagamento dilazionato\glo;
	\end{itemize}
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle vendite la cui proposta d'ordine deve ancora essere gestita dall'azienda cliente;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}


\subsubsection{UC14.1.2 - Visualizzazione vendite con pagamento immediato}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente, mostrando esclusivamente i risultati relativi alle vendite con modalità di pagamento immediato;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente. Vengono mostrati esclusivamente i risultati relativi alle vendite con modalità di pagamento immediato;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle vendite la cui proposta d'ordine deve ancora essere gestita dall'azienda cliente, visualizzando solo le vendite con modalità di pagamento immediato;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}


\subsubsection{UC14.1.3 - Visualizzazione vendite con pagamento dilazionato}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente, mostrando esclusivamente i risultati relativi alle vendite con modalità di pagamento dilazionato\glo;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle vendite la cui proposta d'ordine deve essere ancora accettata dall'azienda cliente. Vengono mostrati esclusivamente i risultati relativi alle vendite con modalità di pagamento dilazionato\glo;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle vendite la cui proposta d'ordine deve ancora essere gestita dall'azienda cliente, visualizzando solo le vendite con modalità di pagamento dilazionato\glo;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}


\subsubsection{UC14.1.4 - Visualizzazione vendite con pagamento dilazionato non concluse}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista delle vendite con pagamento dilazionato\glosp approvate, ma non ancora concluse, ovvero l'azienda-cliente deve ancora effettuare il pagamento;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle vendite con modalità di pagamento dilazionato\glosp accettate ma non ancora concluse;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle vendite con modalità di pagamento dilazionato\glosp accettate ma non ancora concluse;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}

\subsubsection{UC14.1.5 - Visualizzazione vendite concluse}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista delle vendite concluse;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle vendite concluse, con specificato l'avvenuto successo o meno (rifiuto della proposta d'ordine da parte dell'azienda cliente);
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle vendite concluse;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}

\subsubsection{UC14.2 - Gestione acquisti}
\begin{figure}[h]
	\includegraphics[width=8cm]{res/images/UC14-Acquisti.png}
	\centering
	\caption{Gestione degli acquisti da parte delle aziende}
\end{figure}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: alle aziende sono messe a disposizione diverse operazione per visualizzare e gestire gli acquisti all'interno della piattaforma. Esse comprendono la visualizzazione degli ordini in attesa di conferma, degli acquisti conclusi, e degli acquisti con pagamento dilazionato ancora da estinguere. Inoltre è possibile effettuare il pagamento di quest'ultimi;
	\item \textbf{Scenario principale}: l'utente visualizza e svolge alcune operazioni per gestire i propri acquisti;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e mette a disposizione tutte le pagine necessarie alla visualizzazione e gestione delle vendite;
	\item \textbf{Postcondizione}: l'azienda ha visualizzato e/o gestitole proprie vendite.
\end{itemize} 
\subsubsection{UC14.2.1 - Visualizzazione proposte d'acquisto in attesa di conferma}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare delle proposte d'acquisto che necessitano di conferma;
	\item \textbf{Scenario principale}: l'utente visualizza la lista delle proposte d'acquisto che necessitano di conferma. Per ognuna di esse ha a possibilità di confermare la proposta [UC14.2.3] o di rifiutarla [UC14.2.2];
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista delle proposte d'acquisto che necessitano di conferma;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}
\subsubsection{UC14.2.2 - Rifiuto di una proposta di acquisto}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può rifiutare una proposta d'acquisto. Per confermare l'operazione verrà utilizzato MetaMask\glo;
	\item \textbf{Scenario principale}: l'utente visualizza una proposta d'acquisto che necessitano di conferma e decide di rifiutarla;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, ed ha mostrato la lista delle proposte d'acquisto che necessitano di conferma;
	\item \textbf{Postcondizione}: l'azienda ha rifiutato la proposta d'acquisto. La proposta non sarà più presente nella lista di attesa per la conferma. L'acquisto comparirà come acquisto concluso, con esito negativo, nella lista delle vendite dell'azienda-venditrice [UC14.1.5]. Il sistema ritorna l'ammontare trattenuto per l'ordine all'azienda-cliente.
\end{itemize}
\subsubsection{UC14.2.3 - Conferma di una proposta di acquisto}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può confermare una proposta d'acquisto. Per confermare l'operazione verrà utilizzato MetaMask\glo;
	\item \textbf{Scenario principale}: l'utente visualizza una proposta d'acquisto che necessitano di conferma e decide di confermarla;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, ed ha mostrato la lista delle proposte d'acquisto che necessitano di conferma;
	\item \textbf{Postcondizione}: l'azienda ha confermato la proposta d'acquisto. La proposta non sarà più presente nella lista di attesa per la conferma, comparirà invece sulla lista degli acquisti conclusi [UC14.2.4]. L'acquisto comparirà come acquisto concluso, con esito positivo, nella lista delle vendite dell'azienda-venditrice [UC14.1.5]. Il sistema trasferisce l'ammontare trattenuto per l'ordine all'azienda-venditrice. L'azienda-cliente riceve nella pagina dedicata la fattura IVA relativa a questo ordine.
\end{itemize}
\subsubsection{UC14.2.4 - Visualizzazione acquisti conclusi}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista degli acquisti conclusi;
	\item \textbf{Scenario principale}: l'utente visualizza la lista degli acquisti conclusi;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista degli acquisti conclusi;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}
\subsubsection{UC14.2.5 - Visualizzazione acquisti con pagamento dilazionato non conclusi}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: l'azienda può visualizzare la lista dei pagamenti dilazionati\glosp ancora non conclusi, ovvero quelli dai quali l'azienda-venditrice si aspetta un pagamento entro il periodo stabilito;
	\item \textbf{Scenario principale}: l'utente visualizza la lista dei pagamenti dilazionati\glosp non ancora conclusi. Ha la possibilità di effettuare il versamento all'azienda-venditrice;
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà di visualizzare la lista degli acquisti a pagamento dilazionato\glosp non ancora conclusi;
	\item \textbf{Postcondizione}: l'azienda visualizza tale lista.
\end{itemize}
\subsubsection{UC14.2.6 - Effettuazione pagamento dilazionato}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda-cliente;
	\item \textbf{Attori Secondaari}: azienda-venditrice, MetaMask\glo;
	\item \textbf{Descrizione}: l'azienda può effettuare il versamento della somma dovuta all'azienda-venditrice, relativa ad un pagamento dilazionato non ancora saldato. In questa maniera l'azienda-cliente può ricevere la fattura relativa a suddetto ordine;
	\item \textbf{Scenario principale}: l'utente visualizza la lista dei pagamenti dilazionati non ancora conclusi, preme sul tasto per il pagamento e segue la procedura attraverso MetaMask\glosp per effettuare il versamento;
	\item \textbf{Inclusione}: 
	\begin{itemize}
		\item \textbf{UC14.2.5}: l'utente che preme il pulsante per effettuare il pagamento deve obbligatoriamente aver richiesto la visualizzazione della lista dei pagamenti dilazionati non ancora conclusi;
	\end{itemize}
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, e questo ha espresso la volontà effettuare il pagamento per saldare l'importo dovuto riguardante un pagamento dilazionato;
	\item \textbf{Postcondizione}: l'azienda-cliente ha effettuato il versamento della somma dovuta all'azienda-venditrice. L'azienda-cliente ha ricevuto la fattura per tale ordine è la può reperire nella sezione dedicata [UC14.3]. L'azienda-venditrice può ottenere le informazioni relative all'acquisto nell'apposita sezione [UC14.1.5].
\end{itemize}


\subsubsection{UC14.3 - Visualizzazione Fatture}
\begin{itemize}
	\item \textbf{Attori Primari}: azienda;
	\item \textbf{Descrizione}: alle aziende sono messe a disposizione diverse operazione per visualizzare le fatture riguardanti gli acquisti e le vendite all'interno della piattaforma.
	\item \textbf{Scenario principale}: l'utente visualizza le fatture riguardanti gli acquisti e le vendite;
	 
	\item \textbf{Precondizione}: il sistema ha riconosciuto l'utente autenticato come azienda, l'utente ha espresso la volontà di visualizzare le fatture;
	\item \textbf{Postcondizione}: l'azienda ha visualizzato le proprie fatture.
\end{itemize} 
